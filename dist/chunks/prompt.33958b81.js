import{o as v,p as L,q as d,r as y,u as l}from"./index.f02b0593.js";let g=(t,e)=>{Array.isArray(t)||(t=[t]);let s,a=[],o=()=>{let u=t.map(i=>i.get());(s!==d||u.some((i,T)=>i!==a[T]))&&(s=d,a=u,r.set(e(...u)))},r=v();return L(r,()=>{let u=t.map(i=>i.listen(o,e));return o(),()=>{for(let i of u)i()}}),r};const c=y("STWPrompt",{status:"inactive",prompt:""}),n=l("STWTimer",0,{encode:JSON.stringify,decode:JSON.parse});let m;function S(t){clearTimeout(m),n.set(t);function e(){n.get()>0&&(m=setTimeout(()=>{n.get()!==0&&(n.set(n.get()-1),e())},1e3))}e()}function J(t,e=60){p.set([]),c.set({status:"active",prompt:t}),S(e)}function f(){clearTimeout(m),c.setKey("status","inactive"),n.set(0)}const p=l("STWGuessedLetters",[],{encode:JSON.stringify,decode:JSON.parse}),h=g([c,p],(t,e)=>{const s=t.prompt.split(""),a=[],o=[];return e.forEach(r=>{s.includes(r)?o.push(r):a.push(r)}),{wrongLetters:a,correctLetters:o}}),N=g([c,p],(t,e)=>t.prompt.split("").filter(s=>s===" "?!1:!e.includes(s)));N.listen(t=>{c.get().status==="active"&&(t.length===0||h.get().wrongLetters.length>10)&&f()});export{J as a,p as g,c as p,N as r,f as s,n as t,h as v};
